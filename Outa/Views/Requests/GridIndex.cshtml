@model PagedList.IPagedList<Outa.Models.Request>
@using PagedList;
@using PagedList.Mvc;
@{
    ViewBag.Title = "GridIndex";
    Layout = "/Views/Shared/LayoutFluid.cshtml";
}
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="~/Content/component.css"/>
    <link rel="stylesheet" type="text/css" href="~/Content/hover.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/animate.css" />
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.infinitescroll.min.js"></script>
    <script src="~/Scripts/masonry.pkgd.min.js"></script>
    <script src="~/Scripts/imagesloaded.pkgd.js"></script>
</head>
<body>
    <header>
        <h1>Recent Requests</h1>
    </header>
@using (Html.BeginForm())
{
    <div class="form-horizontal" style="text-align:center">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            <div class="row" style="padding:15px">
                Search By Tag
            </div>
            <div class="col-md-4 col-md-offset-4">
                <input id="SearchString" name="SearchString" type="text" class="form-control" style="width:100%">
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-12">
                <input type="submit" value="Search" class="btn btn-default" style="width:30%" />
            </div>
        </div>
    </div>
        }
        <div class="container-fluid" id="grid-container">
            <div class="grid" id="grid">
                @foreach (var item in ViewBag.onePage)
                {
                    <div class="grid-item">
                        <a href="@Url.Action("Details", "Requests", new { id = item.Id }, null)" style="text-decoration:none">
                            <div class="hvr-grow">
                                <div class="requesttable">
                                    <h2 style="color:#e8702a">@item.Title</h2>
                                    <img src="@item.Img" align="middle" />
                                    <div class="requestcontent">
                                        <p>@item.AuthorUn</p>
                                        <p>@item.Date</p>
                                        <p>@item.Tags</p>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                }
                <div id="page-nav">
                    <a id="next-page" href="/Requests/GridIndex?page=2"></a>
                </div>
            </div>
        </div>
        <script>
            (function () {

                var $container = $('#grid');

                $container.imagesLoaded(function () {
                    $container.masonry({
                        itemSelector: '.grid-item',
                    });
                });
                var $children = $container.children();
                $children.addClass("animated zoomIn");
                $children.one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function () {
                    $children.removeClass("animated zoomIn");
                });
                $container.infinitescroll({

                    navSelector: "#page-nav",
                    nextSelector: "#next-page",
                    itemSelector: ".grid-item",

                    loading: {
                        finishedMsg: 'No more pages to load.'
                    }
                },

            function (newElements) {
                var $newElems = $(newElements).css({ opacity: 0 });
                imagesLoaded($newElems, function () {
                    $newElems.addClass("animated zoomIn")
                    $container.masonry('appended', $newElems, true);
                    $newElems.one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function () {
                        $newElems.removeClass("animated zoomIn");
                    });
                })
            });

            })();
        </script>
</body>
</html>